<!DOCTYPE html>
<html>
  <head>
    <title>text.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=GB18030">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->

  </head>
  
<table style="margin-bottom: 60px;" border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td>
                <a href="#" onclick="B_I_U('Bold');">粗体</a>&nbsp;&nbsp;
                <a href="#" onclick="B_I_U('Italic');">斜体</a>&nbsp;&nbsp;
                <a href="#" onclick="B_I_U('Underline');">下划线</a>&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="#" onclick="showFontSize()">字号</a>&nbsp;&nbsp;
                <div id="font_size">
                </div>
                <a href="#" onclick="callColorDlg()">字体颜色</a>
                <a href="#" onclick="showFaces()">选择表情</a>
            </td>
            <td>
                <iframe id="chat_content" frameborder="1" height="100" width="300"></iframe>
                <script type="text/javascript">
                    chat_content.document.designMode="on";    //首先要把iframe的designMode开启,才可以编辑
                </script>
            </td>
        </tr>
</table>
</body>

 

js代码如下:

<script type="text/javascript">
       //粗体、斜体、下划线
       function B_I_U(b_i_u)
       {
             var i=chat_content.document.execCommand(b_i_u);                                
       }
       
       //修改字号   
       function showFontSize()
       {
       if($('font_size').style.display=="block")
              $('font_size').style.display="none";
       else
              $('font_size').style.display="block";
       }
       //添加从1到7的字号           
       for(var i=1;i<=7;i++)
       {
       $("font_size").insertAdjacentHTML("beforeEnd","<a href=\"#\" onclick=\"chat_content.document.execCommand('FontSize','','"+i+"');$('font_size').style.display='none';\">"+i+"号</a><br />");
       }
        //以下都是从MSDN上拷贝下来的(目的是调用系统自带的调色板--可以在msdn上查"Dialog Helper")
       var sInitColor = null;   //初始化颜色,(在下次打开调色板的时候,可以记住上次选的颜色)
       function callColorDlg(){
       //当第一次选的时候.就记住这次选的颜色      
       if (sInitColor == null) 
             var sColor = dlgHelper.ChooseColorDlg();
       //否则就默认选中上次的颜色
       else       
       var sColor = dlgHelper.ChooseColorDlg(sInitColor);
       sColor = sColor.toString(16);
       if (sColor.length < 6) {
       var sTempString = "000000".substring(0,6-sColor.length);
       sColor = sTempString.concat(sColor);
       }
       chat_content.document.execCommand("ForeColor", false, sColor);
       //在这里把每次选择的颜色,赋值给初始化的值.
       sInitColor = sColor;
       }
                            
       //打开表情框(用的是模窗口)
       //用了60个24*24的表情
       function showFaces()
        {
       var img = window.showModalDialog("Face.htm",null,
       "dialogWidth:250px;dialogHeight:150px;help:no;resizable:no;status:no;scroll:no;");
            if(img!=null)
            {
                  var imgTemp="<img src="+ img +" border=0>";
                  chat_content.focus();
                  var createRange=chat_content.document.selection.createRange();
                  createRange.pasteHTML(imgTemp);
            }
       }
       </script>

 

 

Face.htm页面代码

<body>

    <script type="text/javascript">
    function $(id)
    {
        return document.getElementById(id);
    }       
    </script>

    <div id="faces">
    </div>

    <script type="text/javascript">

        //60个表情,按1到60命名,方便循环..
        for(var i=1;i<=60;i++)
        {
            $("faces").insertAdjacentHTML("beforeEnd",
                                                     "<img src=\"faces/"+ i +".gif\" onclick=\"window.returnValue=this.src; window.close();\">");
            if(i%10==0)
            {
                $("faces").insertAdjacentHTML("beforeEnd","<br />");
            }
        }
    </script>

</body>
</html>



